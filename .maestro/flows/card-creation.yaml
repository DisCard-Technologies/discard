# Card Creation Flow E2E Test
# Tests creating a new virtual card

appId: com.discard.app
name: Card Creation Flow
tags:
  - smoke
  - cards
---

# Launch app
- launchApp

# Ensure user is logged in
- runFlow: utils/login.yaml

# Navigate to cards tab
- tapOn:
    text: "Cards"

# Wait for cards screen
- waitForAnimationToEnd

# Tap create card button
- tapOn:
    id: "create-card-button"

# Wait for card creation modal
- waitForAnimationToEnd

# Verify card creation screen - Choose Card Type
- assertVisible:
    text: "Choose Card Type"
    timeout: 5000

# Select Wallet Card (Marqeta) provider
- tapOn:
    id: "provider-marqeta"

# Wait for details step
- waitForAnimationToEnd

# Enter card nickname
- tapOn:
    id: "card-nickname-input"
- inputText: "Shopping Card"

# Tap create/confirm button
- tapOn:
    id: "create-card-confirm"

# Wait for card creation to complete
- waitForAnimationToEnd:
    timeout: 10000

# Verify card was created
- assertVisible:
    text: "Shopping Card"
    timeout: 5000

# Take screenshot of new card
- takeScreenshot: "card-created"
